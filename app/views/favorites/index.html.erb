<% content_for :meta_title do %><%= "#{@user.name}'s Favorites" %><% end %>
<% content_for :meta_image do %><%= @images.first.try(:link) || @user.image.try(:link) %><% end %>

<h1><%= @user.name %>'s Favorites</h1>
<div class="text-center"><%= paginate @images %></div>
<div class="row">
  <% @images.each_with_index do |image, index| %>
    <% if (index % 4).zero? && !index.zero? %>
      </div><div class="row margin-top-30">
    <% end %>
    <div class="col-md-3">
      <%= link_to image_path image.id do %>
        <%= image_tag image.link, class: "img-responsive" %>
      <% end %>
      <%= link_to "#", class: "favorite-image", data: { image_id: image.id } do %>
        <%= fa_icon "2x heart#{"-o" unless current_user.favorites.exists?(image_id: image.id)}"%>
      <% end if current_user %>
    </div>
  <% end %>
</div>
<div class="text-center"><%= paginate @images %></div>
